(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d056d24a"],{"02f4":function(t,e,r){var a=r("4588"),n=r("be13");t.exports=function(t){return function(e,r){var s,i,o=String(n(e)),c=a(r),l=o.length;return c<0||c>=l?t?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===l||(i=o.charCodeAt(c+1))<56320||i>57343?t?o.charAt(c):s:t?o.slice(c,c+2):i-56320+(s-55296<<10)+65536)}}},"0390":function(t,e,r){"use strict";var a=r("02f4")(!0);t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},"07f7":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?t._e():r("div",[r("b-alert",{attrs:{show:t.error,variant:"danger"}},[t._v(t._s(t.error))]),t.vote?r("form",{staticClass:"my-3",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)},change:t.onChange}},[r("b-card-group",{staticClass:"mb-3",attrs:{deck:""}},[r("EntryCard",{attrs:{data:t.vote.entries[0]}},[r("b-form-group",{attrs:{label:"Criteria"}},t._l(t.criteria,function(e,a){return r("b-form-radio",{key:a,attrs:{value:0},model:{value:t.result[a],callback:function(e){t.$set(t.result,a,e)},expression:"result[index]"}},[t._v(t._s(e))])}),1),r("b-form-group",{attrs:{label:"Comments"}},[r("b-form-textarea",{attrs:{rows:"5"},model:{value:t.comments[0],callback:function(e){t.$set(t.comments,0,e)},expression:"comments[0]"}})],1)],1),r("EntryCard",{attrs:{data:t.vote.entries[1]}},[r("b-form-group",{attrs:{label:"Criteria"}},t._l(t.criteria,function(e,a){return r("b-form-radio",{key:a,attrs:{value:1},model:{value:t.result[a],callback:function(e){t.$set(t.result,a,e)},expression:"result[index]"}},[t._v(t._s(e))])}),1),r("b-form-group",{attrs:{label:"Comments"}},[r("b-form-textarea",{attrs:{rows:"5"},model:{value:t.comments[1],callback:function(e){t.$set(t.comments,1,e)},expression:"comments[1]"}})],1)],1)],1),r("div",{staticClass:"col-md-6 mx-auto"},[r("b-button",{attrs:{disabled:!t.valid,type:"submit",variant:"primary",block:""}},[t._v("Submit")])],1)],1):r("div",[r("div",{staticClass:"col-md-6 mx-auto"},[r("b-button",{attrs:{variant:"primary",block:""},on:{click:function(e){return e.preventDefault(),t.onCreate(e)}}},[t._v("Start Vote")])],1)])],1)},n=[],s=(r("96cf"),r("3b8d")),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{attrs:{"img-src":t.data.images.image_large}},[r("b-card-title",[r("b-button",{staticClass:"ml-2 float-right",attrs:{href:t.data.url,target:"blank",variant:"primary",size:"sm"}},[t._v("\n      PLAY "),r("i",{staticClass:"fas fa-external-link-alt"})]),t._v("\n    "+t._s(t.data.title)+"\n  ")],1),r("b-card-text",{domProps:{innerHTML:t._s(t.nl2br(t.data.description))}}),r("b-card-text",{staticClass:"small text-muted"},[t._v(t._s(t.data.category.join(", ")))]),r("div",{attrs:{slot:"footer"},slot:"footer"},[t._t("default")],2)],1)},o=[],c=(r("a481"),r("205f")),l=r("d6e4"),u=r("4968"),d={components:{BCard:c["a"],BCardText:l["a"],BCardTitle:u["a"]},props:["data"],methods:{nl2br:function(t){return t.replace(/[\r\n]+/,"<br>")}}},v=d,m=r("2877"),f=Object(m["a"])(v,i,o,!1,null,null,null),h=f.exports,p=r("db49"),b=r.n(p),g=r("bc3a"),x=r.n(g),_=r("1947"),k=r("5cce"),C=r("8226"),y=r("9e14"),S=r("9c7d"),w={components:{BButton:_["a"],BCardGroup:k["a"],BFormGroup:C["a"],BFormRadio:y["a"],BFormTextarea:S["a"],EntryCard:h},data:function(){return{valid:!1,error:!1,loading:!0,comments:[],result:[],vote:null,criteria:b.a.criteria}},methods:{validate:function(){var t=this.result.filter(function(t){return 0===t||1===t});this.valid=t.length===this.criteria.length},saveSession:function(){sessionStorage.setItem("vote",JSON.stringify({result:this.result,comments:this.comments}))},onChange:function(){this.validate(),this.saveSession()},onCreate:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.vote){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.prev=3,t.next=6,x.a.post("/api/vote");case 6:e=t.sent,this.vote=e.data.data,this.error=null,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),this.error=b.a.messages[t.t0.response.data.error];case 14:this.loading=!1;case 15:case"end":return t.stop()}},t,this,[[3,11]])}));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.valid){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.prev=3,t.next=6,x.a.patch("/api/vote",{result:this.result,comments:this.comments});case 6:this.vote=null,this.result=[],this.comments=[],this.error=null,this.validate(),this.saveSession(),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),this.error=b.a.messages[t.t0.response.data.error];case 17:this.loading=!1;case 18:case"end":return t.stop()}},t,this,[[3,14]])}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.vote){t.next=16;break}return t.prev=1,e=JSON.parse(sessionStorage.getItem("vote"))||null,t.next=5,x.a.get("/api/vote");case 5:r=t.sent,this.vote=r.data.data,this.result=e.result||[],this.comments=e.comments||[],this.error=null,this.validate(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),this.vote=null;case 16:this.loading=!1;case 17:case"end":return t.stop()}},t,this,[[1,13]])}));function e(){return t.apply(this,arguments)}return e}()},$=w,A=Object(m["a"])($,a,n,!1,null,null,null);e["default"]=A.exports},a481:function(t,e,r){"use strict";var a=r("cb7c"),n=r("4bf8"),s=r("9def"),i=r("4588"),o=r("0390"),c=r("5f1b"),l=Math.max,u=Math.min,d=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};r("214f")("replace",2,function(t,e,r,h){return[function(a,n){var s=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,s,n):r.call(String(s),a,n)},function(t,e){var n=h(r,t,this,e);if(n.done)return n.value;var d=a(t),v=String(this),m="function"===typeof e;m||(e=String(e));var b=d.global;if(b){var g=d.unicode;d.lastIndex=0}var x=[];while(1){var _=c(d,v);if(null===_)break;if(x.push(_),!b)break;var k=String(_[0]);""===k&&(d.lastIndex=o(v,s(d.lastIndex),g))}for(var C="",y=0,S=0;S<x.length;S++){_=x[S];for(var w=String(_[0]),$=l(u(i(_.index),v.length),0),A=[],B=1;B<_.length;B++)A.push(f(_[B]));var E=_.groups;if(m){var O=[w].concat(A,$,v);void 0!==E&&O.push(E);var R=String(e.apply(void 0,O))}else R=p(w,v,$,A,E,e);$>=y&&(C+=v.slice(y,$)+R,y=$+w.length)}return C+v.slice(y)}];function p(t,e,a,s,i,o){var c=a+t.length,l=s.length,u=m;return void 0!==i&&(i=n(i),u=v),r.call(o,u,function(r,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(c);case"<":o=i[n.slice(1,-1)];break;default:var u=+n;if(0===u)return r;if(u>l){var v=d(u/10);return 0===v?r:v<=l?void 0===s[v-1]?n.charAt(1):s[v-1]+n.charAt(1):r}o=s[u-1]}return void 0===o?"":o})}})},db49:function(t,e){t.exports={criteria:["Actors","Cinematography","Direction","Film Editing","Story"],messages:{error_invalid_code:"Authentication error!",error_invalid_user:"Access denied!",error_no_active_vote:"No active vote!",error_no_vote_left:"No vote left!",error_missing_token:"Unauthorized request!",error_invalid_token:"Expired token!",error_system_error:"System error!"}}}}]);
//# sourceMappingURL=chunk-d056d24a.b466efdd.js.map